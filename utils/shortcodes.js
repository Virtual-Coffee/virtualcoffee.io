module.exports = function (eleventyConfig) {
  eleventyConfig.addShortcode('podcastSubscribe', function (posts) {
    return `<div class="podcastSubscribe">
    <a href="https://podcasts.apple.com/us/podcast/the-virtual-coffee-podcast/id1547260240" aria-label="Listen on Apple Podcasts"><svg width="160" height="40" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a"><stop stop-color="#F452FF" offset="0%"/><stop stop-color="#832BC1" offset="100%"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><rect fill="#000" width="160" height="40" rx="7"/><path d="M24.214 21.373c-.236.598-.778 1.439-1.548 2.031-.444.342-.975.67-1.703.885-.777.23-1.734.308-2.925.308H7.151c-1.191 0-2.148-.077-2.925-.308a5.069 5.069 0 01-1.703-.885c-.77-.592-1.312-1.433-1.548-2.03-.473-1.204-.478-2.57-.478-3.43V7.056c0-.86.005-2.226.478-3.43.236-.597.778-1.438 1.548-2.03.444-.343.975-.67 1.703-.886C5.003.48 5.96.402 7.151.402h10.887c1.191 0 2.148.078 2.925.308a5.07 5.07 0 011.703.885c.77.593 1.312 1.434 1.548 2.031.473 1.204.478 2.57.478 3.43v10.888c0 .86-.005 2.225-.478 3.43z" fill="url(#a)" transform="translate(9 7)"/><path d="M33.214 28.373c-.236.598-.778 1.439-1.548 2.031-.444.342-.975.67-1.703.885-.777.23-1.734.308-2.925.308H16.151c-1.191 0-2.148-.077-2.925-.308a5.069 5.069 0 01-1.703-.885c-.77-.592-1.312-1.433-1.548-2.03-.473-1.204-.478-2.57-.478-3.43V14.056c0-.86.005-2.226.478-3.43.236-.597.778-1.438 1.548-2.03.444-.343.975-.67 1.703-.886.777-.23 1.734-.308 2.925-.308h10.887c1.191 0 2.148.078 2.925.308a5.07 5.07 0 011.703.885c.77.593 1.312 1.434 1.548 2.031.473 1.204.478 2.57.478 3.43v10.888c0 .86-.005 2.225-.478 3.43z"/><path d="M23.35 21.31c-.364-.384-1.002-.63-1.754-.63-.753 0-1.39.246-1.754.63-.19.199-.29.404-.321.696-.061.565-.027 1.052.04 1.83.062.742.182 1.73.339 2.738.11.716.201 1.103.283 1.38.134.45.633.842 1.413.842s1.278-.393 1.412-.842c.082-.277.172-.664.284-1.38.156-1.008.276-1.996.339-2.738.066-.778.1-1.265.04-1.83a1.113 1.113 0 00-.322-.697zm-3.733-3.412a1.98 1.98 0 103.96 0 1.98 1.98 0 00-3.96 0zm1.956-7.814c-4.631.013-8.426 3.77-8.483 8.4-.047 3.752 2.348 6.96 5.692 8.137a.114.114 0 00.15-.124 48.534 48.534 0 01-.123-.872.293.293 0 00-.172-.23 7.43 7.43 0 01-4.459-6.876c.04-4.029 3.33-7.314 7.359-7.346 4.119-.033 7.48 3.308 7.48 7.42a7.43 7.43 0 01-4.46 6.802.292.292 0 00-.171.23c-.038.289-.08.581-.123.872a.114.114 0 00.15.124c3.312-1.165 5.693-4.324 5.693-8.029 0-4.7-3.83-8.522-8.533-8.508zm-.154 3.903a4.616 4.616 0 014.794 4.608c0 1.324-.561 2.519-1.458 3.36a.353.353 0 00-.11.277c.017.317.01.625-.01.972a.112.112 0 00.174.1 5.698 5.698 0 002.492-4.71 5.706 5.706 0 00-5.925-5.695c-3.016.117-5.435 2.604-5.474 5.622a5.697 5.697 0 002.492 4.783.112.112 0 00.174-.1 8.157 8.157 0 01-.01-.972.353.353 0 00-.11-.276 4.599 4.599 0 01-1.456-3.485 4.624 4.624 0 014.427-4.484zM43 14.896V9.104h.91v5.028h2.758v.764H43zm5.009-4.897c-.282 0-.528-.218-.528-.495 0-.278.246-.504.528-.504.291 0 .528.226.528.504 0 .277-.237.495-.528.495zm-.4 4.897v-4.194h.818v4.194h-.819zm1.695-.547l.391-.573c.3.312.883.599 1.475.599.619 0 .946-.243.946-.6 0-.416-.5-.555-1.065-.677-.746-.165-1.62-.356-1.62-1.259 0-.668.601-1.241 1.675-1.241.755 0 1.302.26 1.675.599l-.364.547c-.255-.295-.747-.512-1.302-.512s-.9.208-.9.547c0 .364.472.486 1.018.607.765.165 1.675.365 1.675 1.329 0 .72-.619 1.285-1.775 1.285-.737 0-1.383-.217-1.83-.651zm5.81.651c-.692 0-1.047-.373-1.047-1.033v-2.58h-.728v-.685h.728V9.556h.819v1.146h.892v.686h-.892v2.405c0 .295.146.512.428.512a.646.646 0 00.446-.165l.21.59c-.174.157-.429.27-.856.27zm1.258-2.205c0-1.216.92-2.197 2.203-2.197 1.32 0 2.139.98 2.139 2.266v.191h-3.477c.064.712.61 1.302 1.493 1.302.464 0 .974-.173 1.301-.494l.383.512c-.437.408-1.056.625-1.766.625-1.31 0-2.276-.886-2.276-2.205zm2.203-1.555c-.883 0-1.302.678-1.347 1.25h2.685c-.018-.555-.41-1.25-1.338-1.25zm6.092 3.656v-2.683c0-.695-.373-.92-.938-.92-.51 0-.974.295-1.21.607v2.996h-.82v-4.194h.82v.59a2.136 2.136 0 011.556-.694c.929 0 1.411.469 1.411 1.354v2.944h-.82zm6.331.104c-1.365 0-2.22-.99-2.22-2.205 0-1.207.855-2.197 2.22-2.197 1.374 0 2.22.99 2.22 2.197 0 1.215-.846 2.205-2.22 2.205zm0-.695c.883 0 1.365-.712 1.365-1.51 0-.79-.482-1.503-1.365-1.503-.874 0-1.365.712-1.365 1.503 0 .798.491 1.51 1.365 1.51zm6.183.59v-2.682c0-.695-.373-.92-.938-.92-.51 0-.974.295-1.21.607v2.996h-.82v-4.194h.82v.59a2.136 2.136 0 011.556-.694c.929 0 1.411.469 1.411 1.354v2.944h-.82zM45.023 31l1.032-3.047h4.297L51.382 31h1.852l-4.07-11.273h-1.89L43.203 31h1.82zm4.883-4.453H46.5l1.68-4.945h.047l1.68 4.945zm6.055 7.172v-4.07H56c.469.913 1.406 1.492 2.586 1.492 2.062 0 3.43-1.649 3.43-4.25 0-2.602-1.375-4.243-3.461-4.243-1.188 0-2.133.602-2.617 1.547h-.032v-1.414h-1.633V33.72h1.688zm2.148-4.008c-1.297 0-2.156-1.11-2.156-2.82 0-1.696.867-2.82 2.156-2.82 1.336 0 2.172 1.1 2.172 2.82 0 1.726-.836 2.82-2.172 2.82zM65 33.719v-4.07h.04c.468.913 1.405 1.492 2.585 1.492 2.063 0 3.43-1.649 3.43-4.25 0-2.602-1.375-4.243-3.461-4.243-1.188 0-2.133.602-2.617 1.547h-.032v-1.414h-1.632V33.72H65zm2.148-4.008c-1.296 0-2.156-1.11-2.156-2.82 0-1.696.867-2.82 2.156-2.82 1.336 0 2.172 1.1 2.172 2.82 0 1.726-.836 2.82-2.172 2.82zM74.102 31V19.727h-1.688V31h1.688zm5.242.156c1.883 0 3.304-1.07 3.539-2.57H81.28c-.226.719-.937 1.203-1.898 1.203-1.352 0-2.211-.945-2.211-2.375v-.102h5.805v-.578c0-2.492-1.422-4.101-3.704-4.101-2.32 0-3.804 1.719-3.804 4.297 0 2.593 1.46 4.226 3.875 4.226zm1.945-5.023h-4.11c.087-1.242.915-2.14 2.094-2.14 1.18 0 1.977.882 2.016 2.14zM89.477 31v-3.852h2.421c2.211 0 3.766-1.515 3.766-3.718 0-2.196-1.523-3.703-3.71-3.703h-4.227V31h1.75zm2.007-5.32h-2.007v-4.477h2.015c1.516 0 2.383.813 2.383 2.235 0 1.421-.867 2.242-2.39 2.242zm9.04 5.476c2.351 0 3.898-1.617 3.898-4.265 0-2.641-1.555-4.258-3.899-4.258-2.343 0-3.898 1.617-3.898 4.258 0 2.648 1.547 4.265 3.898 4.265zm0-1.39c-1.32 0-2.18-1.047-2.18-2.875 0-1.82.86-2.868 2.18-2.868 1.32 0 2.18 1.047 2.18 2.868 0 1.828-.852 2.875-2.18 2.875zm8.288 1.375c1.196 0 2.133-.602 2.618-1.54h.03V31h1.642V19.727h-1.696v4.421h-.031c-.46-.906-1.398-1.5-2.578-1.5-2.063 0-3.438 1.649-3.438 4.243 0 2.593 1.375 4.25 3.454 4.25zm.446-1.43c-1.336 0-2.172-1.086-2.172-2.82 0-1.727.836-2.82 2.172-2.82 1.297 0 2.164 1.116 2.164 2.82 0 1.718-.867 2.82-2.164 2.82zm9.086 1.445c1.976 0 3.375-1.187 3.554-2.937h-1.625c-.195.953-.875 1.523-1.914 1.523-1.312 0-2.18-1.047-2.18-2.851 0-1.766.86-2.852 2.165-2.852 1.101 0 1.758.695 1.93 1.57h1.609c-.149-1.617-1.438-2.976-3.555-2.976-2.336 0-3.867 1.648-3.867 4.258 0 2.656 1.531 4.265 3.883 4.265zm7.156-.015c1.078 0 2.117-.578 2.594-1.493h.039V31h1.617v-5.664c0-1.648-1.273-2.703-3.266-2.703-2.03 0-3.296 1.094-3.39 2.578h1.594c.148-.734.757-1.203 1.734-1.203 1.031 0 1.648.547 1.648 1.46v.634l-2.25.132c-1.953.11-3.054.993-3.054 2.43 0 1.477 1.125 2.477 2.734 2.477zm.469-1.336c-.906 0-1.5-.47-1.5-1.188 0-.703.57-1.148 1.578-1.219l2.023-.125v.649c0 1.07-.922 1.883-2.101 1.883zm8.5 1.351c1.937 0 3.336-1.031 3.336-2.531 0-1.188-.64-1.844-2.32-2.234l-1.337-.305c-.89-.203-1.265-.555-1.265-1.07 0-.657.61-1.102 1.523-1.102.946 0 1.531.5 1.625 1.297h1.586c-.054-1.516-1.297-2.578-3.21-2.578-1.891 0-3.173 1.008-3.173 2.476 0 1.196.774 1.946 2.336 2.305l1.336.313c.899.203 1.203.515 1.203 1.046 0 .672-.625 1.094-1.64 1.094-1.031 0-1.617-.422-1.774-1.281h-1.672c.157 1.562 1.391 2.57 3.446 2.57zm7.445-.101c.375 0 .75-.032.938-.078V29.64c-.11.023-.383.039-.555.039-.688 0-1-.32-1-1.032v-4.53h1.562V22.78h-1.562v-1.945h-1.695v1.945h-1.196v1.336h1.196v4.719c0 1.586.648 2.219 2.312 2.219zm5.414.101c1.938 0 3.336-1.031 3.336-2.531 0-1.188-.64-1.844-2.32-2.234l-1.336-.305c-.89-.203-1.266-.555-1.266-1.07 0-.657.61-1.102 1.524-1.102.945 0 1.53.5 1.625 1.297h1.586c-.055-1.516-1.297-2.578-3.211-2.578-1.891 0-3.172 1.008-3.172 2.476 0 1.196.773 1.946 2.336 2.305l1.336.313c.898.203 1.203.515 1.203 1.046 0 .672-.625 1.094-1.64 1.094-1.032 0-1.618-.422-1.774-1.281h-1.672c.156 1.562 1.39 2.57 3.445 2.57z" fill="#FFF" fill-rule="nonzero"/></g></svg></a>
    <a href="https://open.spotify.com/show/2i96E6Rm2YyMcGGYSzXlBo" aria-label="Listen on Spotify"><svg width="160" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><rect fill="#000" width="160" height="40" rx="7"/><path d="M43 14.896V9.104h.91v5.028h2.758v.764H43zm5.009-4.897c-.282 0-.528-.218-.528-.495 0-.278.246-.504.528-.504.291 0 .528.226.528.504 0 .277-.237.495-.528.495zm-.4 4.897v-4.194h.818v4.194h-.819zm1.695-.547l.391-.573c.3.312.883.599 1.475.599.619 0 .946-.243.946-.6 0-.416-.5-.555-1.065-.677-.746-.165-1.62-.356-1.62-1.259 0-.668.601-1.241 1.675-1.241.755 0 1.302.26 1.675.599l-.364.547c-.255-.295-.747-.512-1.302-.512s-.9.208-.9.547c0 .364.472.486 1.018.607.765.165 1.675.365 1.675 1.329 0 .72-.619 1.285-1.775 1.285-.737 0-1.383-.217-1.83-.651zm5.81.651c-.692 0-1.047-.373-1.047-1.033v-2.58h-.728v-.685h.728V9.556h.819v1.146h.892v.686h-.892v2.405c0 .295.146.512.428.512a.646.646 0 00.446-.165l.21.59c-.174.157-.429.27-.856.27zm1.258-2.205c0-1.216.92-2.197 2.203-2.197 1.32 0 2.139.98 2.139 2.266v.191h-3.477c.064.712.61 1.302 1.493 1.302.464 0 .974-.173 1.301-.494l.383.512c-.437.408-1.056.625-1.766.625-1.31 0-2.276-.886-2.276-2.205zm2.203-1.555c-.883 0-1.302.678-1.347 1.25h2.685c-.018-.555-.41-1.25-1.338-1.25zm6.092 3.656v-2.683c0-.695-.373-.92-.938-.92-.51 0-.974.295-1.21.607v2.996h-.82v-4.194h.82v.59a2.136 2.136 0 011.556-.694c.929 0 1.411.469 1.411 1.354v2.944h-.82zm6.331.104c-1.365 0-2.22-.99-2.22-2.205 0-1.207.855-2.197 2.22-2.197 1.374 0 2.22.99 2.22 2.197 0 1.215-.846 2.205-2.22 2.205zm0-.695c.883 0 1.365-.712 1.365-1.51 0-.79-.482-1.503-1.365-1.503-.874 0-1.365.712-1.365 1.503 0 .798.491 1.51 1.365 1.51zm6.183.59v-2.682c0-.695-.373-.92-.938-.92-.51 0-.974.295-1.21.607v2.996h-.82v-4.194h.82v.59a2.136 2.136 0 011.556-.694c.929 0 1.411.469 1.411 1.354v2.944h-.82z" fill="#FFF" fill-rule="nonzero"/><path d="M29.894 18.082c-4.03-2.393-10.675-2.613-14.522-1.446a1.169 1.169 0 11-.679-2.237c4.416-1.34 11.756-1.082 16.395 1.672a1.17 1.17 0 01-1.194 2.01zm-.132 3.544a.975.975 0 01-1.34.32c-3.36-2.064-8.482-2.662-12.456-1.456a.976.976 0 01-1.216-.65.976.976 0 01.65-1.215c4.54-1.377 10.183-.71 14.042 1.66a.975.975 0 01.32 1.34zm-1.53 3.403a.778.778 0 01-1.07.26c-2.936-1.794-6.63-2.2-10.982-1.206a.779.779 0 11-.347-1.518c4.762-1.089 8.846-.62 12.141 1.393a.78.78 0 01.259 1.071zM22.5 7C15.597 7 10 12.596 10 19.5S15.597 32 22.5 32C29.404 32 35 26.404 35 19.5S29.404 7 22.5 7z" fill="#1ED760"/><path d="M47.188 31.2c2.79 0 4.565-1.42 4.565-3.678 0-1.743-1.029-2.748-3.536-3.279l-1.311-.274c-1.552-.332-2.167-.913-2.167-1.784 0-1.096 1.03-1.777 2.432-1.777 1.453 0 2.44.739 2.557 1.943h1.801c-.058-2.092-1.793-3.528-4.333-3.528-2.548 0-4.35 1.41-4.35 3.461 0 1.727 1.088 2.839 3.487 3.345l1.303.274c1.602.349 2.233.93 2.233 1.86 0 1.07-1.087 1.85-2.606 1.85-1.594 0-2.723-.713-2.889-1.9h-1.81c.117 2.133 1.918 3.486 4.624 3.486zm7.811 2.689v-4.325h.042c.498.971 1.494 1.585 2.747 1.585 2.191 0 3.644-1.751 3.644-4.515s-1.46-4.508-3.677-4.508c-1.262 0-2.266.64-2.78 1.644h-.034v-1.502h-1.735v11.62H55zm2.283-4.259c-1.378 0-2.291-1.178-2.291-2.996 0-1.801.921-2.997 2.29-2.997 1.42 0 2.308 1.17 2.308 2.997 0 1.834-.888 2.996-2.307 2.996zm9.28 1.536c2.499 0 4.142-1.718 4.142-4.532 0-2.806-1.652-4.524-4.142-4.524s-4.142 1.718-4.142 4.524c0 2.814 1.643 4.532 4.142 4.532zm0-1.478c-1.403 0-2.316-1.112-2.316-3.054 0-1.934.913-3.047 2.316-3.047 1.403 0 2.316 1.113 2.316 3.047 0 1.942-.905 3.054-2.316 3.054zm8.508 1.37c.399 0 .797-.033.996-.083v-1.42a3.923 3.923 0 01-.589.042c-.73 0-1.062-.34-1.062-1.096v-4.814h1.66v-1.42h-1.66v-2.066h-1.802v2.067h-1.27v1.419h1.27v5.014c0 1.685.69 2.357 2.457 2.357zM78.5 20.856a1.03 1.03 0 100-2.058 1.03 1.03 0 00-1.038 1.03c0 .564.465 1.028 1.038 1.028zM79.395 31v-8.732h-1.793V31h1.793zm4.159 0v-7.313h1.743v-1.403h-1.768v-.822c0-.772.365-1.162 1.145-1.162.241 0 .482.017.656.05v-1.328a6.424 6.424 0 00-1.004-.083c-1.777 0-2.574.797-2.574 2.49v.855H80.55v1.403h1.203V31h1.802zm4.026 3.254c1.81 0 2.672-.68 3.42-2.797l3.27-9.19h-1.893l-2.208 7.106h-.033l-2.208-7.105h-1.942l3.154 8.74c0 .009-.158.523-.158.54-.274.896-.722 1.245-1.552 1.245-.15 0-.448 0-.58-.033v1.452c.132.025.58.042.73.042z" fill="#FFF" fill-rule="nonzero"/></g></svg></a>
    <a href="https://feeds.buzzsprout.com/1558601.rss" aria-label="RSS Feed"><svg width="160" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><rect fill="#000" width="160" height="40" rx="7"/><path d="M44.79 31v-4.336h2.405L49.492 31h2.016l-2.524-4.61c1.375-.46 2.188-1.695 2.188-3.218 0-2.102-1.445-3.445-3.766-3.445H43.04V31h1.75zm2.452-5.75H44.79v-4.055h2.406c1.352 0 2.172.766 2.172 2.024 0 1.289-.773 2.031-2.125 2.031zm9.461 5.938c2.625 0 4.297-1.336 4.297-3.461 0-1.641-.969-2.586-3.328-3.086l-1.234-.258c-1.461-.313-2.04-.86-2.04-1.68 0-1.031.97-1.672 2.29-1.672 1.367 0 2.296.696 2.406 1.828h1.695c-.055-1.968-1.687-3.32-4.078-3.32-2.398 0-4.094 1.328-4.094 3.258 0 1.625 1.024 2.672 3.281 3.148l1.227.258c1.508.328 2.102.875 2.102 1.75 0 1.008-1.024 1.742-2.454 1.742-1.5 0-2.562-.672-2.718-1.789h-1.703c.109 2.008 1.804 3.282 4.351 3.282zm9.711 0c2.625 0 4.297-1.336 4.297-3.461 0-1.641-.969-2.586-3.328-3.086l-1.235-.258c-1.46-.313-2.039-.86-2.039-1.68 0-1.031.97-1.672 2.29-1.672 1.367 0 2.296.696 2.406 1.828H70.5c-.055-1.968-1.688-3.32-4.078-3.32-2.399 0-4.094 1.328-4.094 3.258 0 1.625 1.024 2.672 3.281 3.148l1.227.258c1.508.328 2.102.875 2.102 1.75 0 1.008-1.024 1.742-2.454 1.742-1.5 0-2.562-.672-2.718-1.789h-1.703c.109 2.008 1.804 3.282 4.351 3.282zM77.274 31v-4.719h4.843v-1.476h-4.844v-3.57h5.29v-1.508h-7.04V31h1.75zm10.117.156c1.882 0 3.304-1.07 3.539-2.57h-1.602c-.226.719-.937 1.203-1.898 1.203-1.352 0-2.211-.945-2.211-2.375v-.102h5.804v-.578c0-2.492-1.421-4.101-3.703-4.101-2.32 0-3.804 1.719-3.804 4.297 0 2.593 1.46 4.226 3.875 4.226zm1.945-5.023h-4.11c.087-1.242.915-2.14 2.094-2.14 1.18 0 1.977.882 2.016 2.14zm6.5 5.023c1.883 0 3.305-1.07 3.539-2.57h-1.602c-.226.719-.937 1.203-1.898 1.203-1.352 0-2.21-.945-2.21-2.375v-.102h5.804v-.578c0-2.492-1.422-4.101-3.703-4.101-2.32 0-3.805 1.719-3.805 4.297 0 2.593 1.46 4.226 3.875 4.226zm1.945-5.023h-4.11c.087-1.242.915-2.14 2.095-2.14 1.18 0 1.976.882 2.015 2.14zm6.078 5.008c1.196 0 2.133-.602 2.618-1.54h.03V31h1.641V19.727h-1.695v4.421h-.031c-.461-.906-1.399-1.5-2.578-1.5-2.063 0-3.438 1.649-3.438 4.243 0 2.593 1.375 4.25 3.453 4.25zm.446-1.43c-1.336 0-2.172-1.086-2.172-2.82 0-1.727.836-2.82 2.172-2.82 1.297 0 2.164 1.116 2.164 2.82 0 1.718-.867 2.82-2.164 2.82zM43 11.996C43 10.19 44.378 9 46.076 9c1.111 0 1.849.495 2.347 1.146l-.72.408a2.061 2.061 0 00-1.627-.781c-1.236 0-2.16.92-2.16 2.223 0 1.293.924 2.231 2.16 2.231a2.33 2.33 0 001.502-.573v-1.042h-1.902v-.764h2.791v2.127C47.898 14.592 47.08 15 46.076 15 44.378 15 43 13.802 43 11.996zm6.279.79c0-1.216.897-2.197 2.15-2.197 1.29 0 2.09.981 2.09 2.266v.191h-3.396c.062.712.596 1.303 1.458 1.303.453 0 .951-.174 1.271-.495l.374.512c-.427.408-1.032.625-1.725.625-1.28 0-2.222-.885-2.222-2.205zm2.15-1.554c-.861 0-1.27.677-1.315 1.25h2.623c-.018-.556-.4-1.25-1.307-1.25zm4.235 3.76c-.676 0-1.022-.374-1.022-1.034v-2.579h-.712v-.686h.712V9.547h.8v1.146h.87v.686h-.87v2.405c0 .296.142.513.418.513a.623.623 0 00.435-.165l.205.59c-.17.156-.418.27-.836.27zm4.93 0c-.676 0-1.022-.374-1.022-1.034v-2.579h-.711v-.686h.71V9.547h.8v1.146h.872v.686h-.871v2.405c0 .296.142.513.418.513a.623.623 0 00.435-.165l.205.59c-.17.156-.418.27-.836.27zm4.394-.105v-2.7c0-.695-.364-.903-.916-.903-.497 0-.95.295-1.182.607v2.996h-.8V9.096h.8v2.188a2.082 2.082 0 011.52-.695c.916 0 1.378.452 1.378 1.337v2.961h-.8zm1.772-2.101c0-1.216.898-2.197 2.151-2.197 1.289 0 2.089.981 2.089 2.266v.191h-3.396c.062.712.596 1.303 1.458 1.303.453 0 .951-.174 1.271-.495l.374.512c-.427.408-1.032.625-1.725.625-1.28 0-2.222-.885-2.222-2.205zm2.151-1.554c-.862 0-1.271.677-1.316 1.25h2.623c-.018-.556-.4-1.25-1.307-1.25z" fill="#FFF" fill-rule="nonzero"/><path d="M10 15.654c9.01 0 16.346 7.332 16.346 16.346h-4.768c0-3.1-1.206-6.02-3.392-8.204A11.502 11.502 0 0010 20.399zm3.363 9.615a3.373 3.373 0 013.368 3.37A3.36 3.36 0 0113.363 32 3.361 3.361 0 0110 28.638a3.374 3.374 0 013.363-3.369zM10 7c13.784 0 25 11.219 25 25h-4.808c0-11.14-9.061-20.206-20.192-20.206z" fill="#F5A623"/></g></svg></a>
  </div>`;
  });

  eleventyConfig.addShortcode('displayPostList', function (posts) {
    return `<ul class="postlist">
    ${posts
      .map(
        (post) => `<li class="postlist-item">
      <a class="postlist-title" href="${post.url}">${post.data.title}</a>
      ${
        post.data.description
          ? `<p class="postlist-description">${post.data.description}</p>`
          : ''
      }
    </li>`
      )
      .join('')}
    </ul>`;
  });

  eleventyConfig.addPairedShortcode(
    'netlifyForm',
    function (content, { action, name }) {
      return `<form action="${action}" method="POST" netlify="true" name="${name}">${content}</form>`;
    }
  );

  eleventyConfig.addShortcode(
    'formSubmit',
    function ({ text = 'Submit' } = {}) {
      return `<div class="text-right">
      <button type="submit" class="btn btn-primary btn-lg">${text}</button>
    </div>`;
    }
  );

  eleventyConfig.addShortcode('formCoC', function () {
    return `<label class="form-group form-check">
      <input type="checkbox" name="agree" class="form-check-input" required value="agree">
      <span class="form-check-label">I've read the Code of Conduct and understand my responsibilities as a member of the Virtual Coffee community</span>
    </label>`;
  });

  function processFormAttributes(labelText, helpText, inputAttributes) {
    const { name } = inputAttributes;

    if (!labelText) {
      throw new Error('missing form label');
    }

    if (!name) {
      throw new Error('missing form name');
    }

    const inputId = inputAttributes.id || `form${name}`;

    const processedHelpText = helpText
      ? helpText
      : inputAttributes.required
      ? 'Required.'
      : null;

    const helpTextId = `help${name}`;

    const attributes = Object.keys(inputAttributes).reduce(
      (attributesArray, attrKey) => {
        // class, id, aria-describedby handled below
        if (attrKey === 'class' || attrKey === 'id') {
          return attributesArray;
        }

        const val = inputAttributes[attrKey];

        if (val === true) {
          return [...attributesArray, attrKey];
        }

        return [...attributesArray, `${attrKey}="${val}"`];
      },
      []
    );

    attributes.push(`class="${inputAttributes['class'] || 'form-control'}"`);

    attributes.push(`id="${inputId}"`);

    if (processedHelpText && !inputAttributes['aria-describedby']) {
      attributes.push(`aria-describedby="${helpTextId}"`);
    }

    return {
      processedHelpText,
      helpTextId,
      attributes,
      inputId,
    };
  }

  eleventyConfig.addShortcode(
    'formInput',
    function ({ labelText, helpText, ...inputAttributes }) {
      const {
        processedHelpText,
        helpTextId,
        attributes,
        inputId,
      } = processFormAttributes(labelText, helpText, inputAttributes);

      return `<div class="form-group">
        <label for="${inputId}">${labelText}</label>
        <input ${attributes.join(' ')} />
        ${
          processedHelpText
            ? `<small id="${helpTextId}" class="form-text text-muted">${processedHelpText}</small>`
            : ``
        }
      </div>`;
    }
  );

  eleventyConfig.addShortcode(
    'formTextarea',
    function ({ labelText, helpText, value = '', ...inputAttributes }) {
      const {
        processedHelpText,
        helpTextId,
        attributes,
        inputId,
      } = processFormAttributes(labelText, helpText, inputAttributes);

      return `<div class="form-group">
        <label for="${inputId}">${labelText}</label>
        <textarea ${attributes.join(' ')}>${value}</textarea>
        ${
          processedHelpText
            ? `<small id="${helpTextId}" class="form-text text-muted">${processedHelpText}</small>`
            : ``
        }
      </div>`;
    }
  );

  // formSelect takes an option list with optional optgroups.
  //
  // label is optional, if there is no label then value will be used
  //
  // Sample:
  // [
  //   {
  //     optgroup: 'Option Group',
  //     options: [
  //       {
  //         label: 'Option 1',
  //         value: 'option_1',
  //       },
  //       {
  //         value: 'option_2',
  //       },
  //       {
  //         label: 'Option 3',
  //         value: 'option_3',
  //       },
  //     ],
  //   },
  //   {
  //     label: 'Option 10',
  //     value: 'option_10',
  //   }
  // ]

  eleventyConfig.addShortcode(
    'formSelect',
    function ({ labelText, helpText, options = [], ...inputAttributes }) {
      const {
        processedHelpText,
        helpTextId,
        attributes,
        inputId,
      } = processFormAttributes(labelText, helpText, inputAttributes);

      function displayOption({ label, value }) {
        return `<option value="${value}">${label || value}</option>`;
      }

      return `<div class="form-group">
        <label for="${inputId}">${labelText}</label>
        <select ${attributes.join(' ')}>
          ${options
            .map((opt) => {
              if (opt.optgroup) {
                return `<optgroup label="${
                  opt.optgroup
                }">${opt.options
                  .map((subOpt) => displayOption(subOpt))
                  .join('')}</optgroup>`;
              }

              return displayOption(opt);
            })
            .join('')}
        </select>
        ${
          processedHelpText
            ? `<small id="${helpTextId}" class="form-text text-muted">${processedHelpText}</small>`
            : ``
        }
      </div>`;
    }
  );

  // formRadio takes an option list
  //
  // label is optional, if there is no label then value will be used
  //
  // Sample:
  // [
  //   {
  //     label: 'Option 10',
  //     value: 'option_10',
  //     checked: true
  //   },
  //   {
  //     label: 'Option 20',
  //     value: 'option_20',
  //   },
  //   {
  //     label: 'Option 30',
  //     value: 'option_30',
  //   },
  // ]

  eleventyConfig.addShortcode(
    'formRadioSelect',
    function ({ labelText, helpText, options = [], ...inputAttributes }) {
      const { processedHelpText, helpTextId } = processFormAttributes(
        labelText,
        helpText,
        inputAttributes
      );

      function displayOption({ label, value, checked }) {
        return `<label class="form-check">
        <input class="form-check-input" type="radio" name="${
          inputAttributes.name
        }" value="${value}" ${checked ? 'checked' : ''}>
        <span class="form-check-label">
          ${label || value}
        </span>
      </label>`;
      }

      return `<div class="form-group">
        <div>${labelText}</div>

          ${options
            .map((opt) => {
              return displayOption(opt);
            })
            .join('')}

        ${
          processedHelpText
            ? `<small id="${helpTextId}" class="form-text text-muted">${processedHelpText}</small>`
            : ``
        }
      </div>`;
    }
  );
};
